<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>And Other Stuff - The Convergence</title>

    <!-- Favicon - Using the logo -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ÔºÜ</text></svg>">

    <!-- Force redirect to #home on first load -->
    <script>
        if (!window.location.hash) {
            window.location.replace(window.location.pathname + '#home');
        }
    </script>

    <!-- GitHub Pages Base URL -->
    <script>
        const base = document.createElement('base');
        const isGitHubPages = location.hostname.includes('github.io');
        const repoName = 'AOS-Convergence';
        base.href = isGitHubPages ? `/${repoName}/` : '/';
        document.head.appendChild(base);
    </script>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/nostr-tools@2.3.1/lib/nostr.bundle.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * { font-family: 'Inter', sans-serif; }
        .mono { font-family: 'JetBrains Mono', monospace; }
        body {
            background-color: #0a0a0a;
            color: #e5e5e5;
            overflow-x: hidden;
        }
        .gradient-text {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .glow { box-shadow: 0 0 20px rgba(102, 126, 234, 0.3); }
        .card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .input-field {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        .input-field:focus {
            border-color: #667eea;
            outline: none;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
        }
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }
        .nav-link { position: relative; }
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: width 0.3s;
        }
        .nav-link:hover::after { width: 100%; }
        .hidden-section { display: none; }
        .active-section {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .grid-bg {
            background-image: 
                linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
        }
        .noise {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
            opacity: 0.03;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        }
        .protected-content {
            filter: blur(5px);
            opacity: 0.5;
            pointer-events: none;
            user-select: none;
        }
        .protected-content.unlocked {
            filter: none;
            opacity: 1;
            pointer-events: all;
        }
        .lock-overlay {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0,0,0,0.7);
            z-index: 10;
        }
        .nav-hidden {
            display: none !important;
        }
        .nav-visible {
            display: inline-flex !important;
        }
        /* Logo styles */
        .logo-img {
            height: 40px;
            width: auto;
            object-fit: contain;
        }
        .logo-container {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        /* Hero logo styling */
        .hero-logo-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 2rem;
        }
        .hero-logo {
            width: 100%;
            max-width: 400px;
            height: auto;
        }
        .hero-subtitle {
            font-family: 'Inter', sans-serif;
            font-size: 1.25rem;
            font-weight: 600;
            color: #a78bfa;
            letter-spacing: 0.2em;
            margin-top: 0.5rem;
        }
    </style>
<base target="_blank">
</head>
<body class="min-h-screen grid-bg">
    <div class="noise"></div>

    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-50 bg-black/80 backdrop-blur-md border-b border-white/10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex-shrink-0 cursor-pointer logo-container" onclick="showSection('home')">
                    <!-- SVG Logo -->
                    <svg class="logo-img" viewBox="0 0 200 60" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <!-- Ampersand symbol -->
                        <text x="10" y="45" font-family="Georgia, serif" font-size="48" font-weight="bold" fill="url(#gradient)">&</text>
                        <!-- OTHER STUFF text -->
                        <text x="55" y="28" font-family="Inter, sans-serif" font-size="20" font-weight="800" fill="white">OTHER</text>
                        <text x="55" y="50" font-family="Inter, sans-serif" font-size="20" font-weight="800" fill="white">STUFF</text>
                        <!-- THE CONVERGENCE text -->
                        <text x="140" y="28" font-family="Inter, sans-serif" font-size="12" font-weight="600" fill="#a78bfa">THE</text>
                        <text x="140" y="50" font-family="Inter, sans-serif" font-size="12" font-weight="600" fill="#a78bfa">CONVERGENCE</text>
                        <defs>
                            <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                    </svg>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-8">
                        <button onclick="showSection('home')" class="nav-link text-gray-300 hover:text-white px-3 py-2 text-sm font-medium">Home</button>
                        <button onclick="checkAuthAndShow('program')" class="nav-link text-gray-300 hover:text-white px-3 py-2 text-sm font-medium">Program</button>
                        <button onclick="checkAuthAndShow('location')" class="nav-link text-gray-300 hover:text-white px-3 py-2 text-sm font-medium">Location</button>
                        <button id="exploreNavBtn" onclick="checkAuthAndShow('explore')" class="nav-link text-gray-300 hover:text-white px-3 py-2 text-sm medium nav-hidden">Explore Oslo</button>
                        <button id="authBtn" onclick="toggleAuth()" class="nav-link text-purple-400 hover:text-purple-300 px-3 py-2 text-sm font-medium mono">[ LOGIN ]</button>
                    </div>
                </div>
                <div class="md:hidden">
                    <button onclick="toggleMobileMenu()" class="text-gray-300 hover:text-white">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
        <div id="mobileMenu" class="hidden md:hidden bg-black/95 border-b border-white/10">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <button onclick="showSection('home')" class="text-gray-300 hover:text-white block px-3 py-2 text-base font-medium w-full text-left">Home</button>
                <button onclick="checkAuthAndShow('program')" class="text-gray-300 hover:text-white block px-3 py-2 text-base font-medium w-full text-left">Program</button>
                <button onclick="checkAuthAndShow('location')" class="text-gray-300 hover:text-white block px-3 py-2 text-base font-medium w-full text-left">Location</button>
                <button id="exploreNavBtnMobile" onclick="checkAuthAndShow('explore')" class="text-gray-300 hover:text-white block px-3 py-2 text-base font-medium w-full text-left nav-hidden">Explore Oslo</button>
                <button onclick="toggleAuth()" class="text-purple-400 hover:text-purple-300 block px-3 py-2 text-base font-medium w-full text-left mono">[ LOGIN ]</button>
            </div>
        </div>
    </nav>

    <!-- Auth Modal -->
    <div id="authModal" class="fixed inset-0 z-[60] hidden overflow-y-auto">
        <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 bg-black/90 transition-opacity" onclick="toggleAuth()"></div>
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen">&#8203;</span>
            <div class="inline-block align-bottom bg-gray-900 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full border border-white/10">
                <div class="px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                    <h3 class="text-lg leading-6 font-medium text-white mb-4">Authenticate with Nostr</h3>
                    <div class="mt-2 space-y-4">
                        <p class="text-sm text-gray-400">Sign in using your Nostr extension (NIP-07) or provide your npub.</p>
                        <div id="authOptions">
                            <button onclick="authWithExtension()" class="w-full btn-primary text-white font-bold py-3 px-4 rounded mb-3 flex items-center justify-center gap-2">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg>
                                Sign with Extension (NIP-07)
                            </button>
                            <div class="relative my-4">
                                <div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-700"></div></div>
                                <div class="relative flex justify-center text-sm"><span class="px-2 bg-gray-900 text-gray-500">Or</span></div>
                            </div>
                            <input type="text" id="manualNpub" placeholder="Enter npub..." class="w-full input-field rounded px-4 py-3 text-white mb-3 mono text-sm">
                            <button onclick="authManual()" class="w-full bg-gray-800 hover:bg-gray-700 text-white font-bold py-3 px-4 rounded border border-white/20">
                                Continue with npub
                            </button>
                        </div>
                        <div id="authLoading" class="hidden text-center py-4">
                            <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500 mx-auto mb-2"></div>
                            <p class="text-sm text-gray-400">Verifying...</p>
                        </div>
                        <div id="authError" class="hidden bg-red-900/50 border border-red-500/50 rounded p-3 text-sm text-red-200"></div>
                    </div>
                </div>
                <div class="bg-gray-900/50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse border-t border-white/10">
                    <button onclick="toggleAuth()" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-600 px-4 py-2 bg-transparent text-base font-medium text-gray-300 hover:text-white hover:bg-gray-800 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="pt-16">
        <!-- Home Section -->
        <section id="home" class="active-section min-h-screen flex items-center justify-center relative overflow-hidden">
            <div class="absolute inset-0 z-0">
                <div class="absolute top-20 left-10 w-72 h-72 bg-purple-600 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse"></div>
                <div class="absolute top-40 right-10 w-72 h-72 bg-blue-600 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse" style="animation-delay: 2s"></div>
                <div class="absolute -bottom-8 left-1/2 w-72 h-72 bg-pink-600 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse" style="animation-delay: 4s"></div>
            </div>

            <div class="relative z-10 max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <div class="mb-8">
                    <span class="mono text-sm text-purple-400 tracking-widest border border-purple-500/30 rounded-full px-4 py-1">OSLO, NORWAY</span>
                </div>

                <!-- Main Logo Display - Using the uploaded logo style -->
                <div class="hero-logo-container">
                    <svg class="hero-logo" viewBox="0 0 400 140" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <!-- Large Ampersand - Serif style like the logo -->
                        <text x="20" y="95" font-family="Georgia, Times New Roman, serif" font-size="110" font-weight="bold" fill="url(#mainGradient)">&</text>
                        <!-- OTHER -->
                        <text x="140" y="55" font-family="Inter, sans-serif" font-size="52" font-weight="800" fill="url(#mainGradient)" letter-spacing="-0.02em">OTHER</text>
                        <!-- STUFF -->
                        <text x="140" y="105" font-family="Inter, sans-serif" font-size="52" font-weight="800" fill="white" letter-spacing="-0.02em">STUFF</text>
                        <!-- THE CONVERGENCE - positioned below -->
                        <text x="140" y="130" font-family="Inter, sans-serif" font-size="16" font-weight="600" fill="#a78bfa" letter-spacing="0.15em">THE CONVERGENCE</text>
                        <defs>
                            <linearGradient id="mainGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                    </svg>
                </div>

                <p class="text-xl md:text-2xl text-gray-400 mb-4 mono">29th ‚Äî 31st May 2026</p>

                <div class="max-w-3xl mx-auto mb-12 text-left space-y-4">
                    <p class="text-lg text-gray-300 leading-relaxed">
                        You are part of a curated list of humans we want to get to know better‚Äîand who we want to share what <span class="font-bold text-purple-400">&</span>Other Stuff is really up to.
                    </p>
                    <p class="text-gray-400 leading-relaxed">
                        Our name is an homage to the "Other Stuff" in Nostr, because we believe that's where the magic lives. It's in the unexpected ideas, the permissionless tools, and the communities that emerge when technology is truly open.
                    </p>
                    <p class="text-gray-400 leading-relaxed">
                        This isn't an ordinary gathering; it's an invitation to explore that broader landscape with us. Join a group of dreamers and builders who believe that open protocols can‚Äîand will‚Äîsave the world by bringing these new possibilities to life.
                    </p>
                </div>

                <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
                    <button onclick="goToRegistration()" class="btn-primary text-white font-bold py-4 px-8 rounded-full text-lg glow">Register Now ‚Üí</button>
                    <button onclick="checkAuthAndShow('location')" class="bg-white/5 hover:bg-white/10 text-white border border-white/20 font-bold py-4 px-8 rounded-full text-lg transition-all">Learn More</button>
                </div>

                <div class="mt-16 grid grid-cols-1 md:grid-cols-3 gap-8 max-w-4xl mx-auto">
                    <div class="card p-6 rounded-2xl">
                        <div class="text-3xl mb-2">üîë</div>
                        <h3 class="text-lg font-semibold mb-1">Nostr Native</h3>
                        <p class="text-sm text-gray-400">Sign in with your existing keys. No passwords needed.</p>
                    </div>
                    <div class="card p-6 rounded-2xl">
                        <div class="text-3xl mb-2">üèîÔ∏è</div>
                        <h3 class="text-lg font-semibold mb-1">Secret Venue</h3>
                        <p class="text-sm text-gray-400">Historic venue in Oslo. Details revealed after login.</p>
                    </div>
                    <div class="card p-6 rounded-2xl">
                        <div class="text-3xl mb-2">üí¨</div>
                        <h3 class="text-lg font-semibold mb-1">Private Chat</h3>
                        <p class="text-sm text-gray-400">Signal integration for registered attendees only.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Registration Section (Protected) -->
        <section id="registration" class="hidden-section min-h-screen py-20 px-4 relative">
            <div id="registrationLock" class="lock-overlay rounded-3xl">
                <div class="text-center">
                    <div class="text-6xl mb-4">üîí</div>
                    <p class="text-xl text-white mb-4">Registration is invite-only</p>
                    <button onclick="toggleAuth()" class="btn-primary text-white font-bold py-3 px-6 rounded-full">Login with Nostr</button>
                </div>
            </div>
            <div class="max-w-2xl mx-auto protected-content" id="registrationContent">
                <div class="card rounded-3xl p-8 md:p-12">
                    <div class="text-center mb-8">
                        <h2 class="text-3xl font-bold mb-2 gradient-text">Registration</h2>
                        <p class="text-gray-400">Complete your event registration</p>
                        <div id="userNpubDisplay" class="mt-4 mono text-xs text-purple-400 break-all"></div>
                    </div>

                    <form id="registrationForm" class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">What's in a name? *</label>
                                <input type="text" name="fullName" required class="w-full input-field rounded-lg px-4 py-3 text-white" placeholder="Rabble Cat">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">Name for Badge *</label>
                                <input type="text" name="badgeName" required class="w-full input-field rounded-lg px-4 py-3 text-white" placeholder="rabble">
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">Email *</label>
                                <input type="email" name="email" required class="w-full input-field rounded-lg px-4 py-3 text-white" placeholder="rabble@example.com">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">Signal Handle / Phone</label>
                                <input type="text" name="signal" class="w-full input-field rounded-lg px-4 py-3 text-white" placeholder="+47 000 00 000">
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Dietary Requirements</label>
                            <textarea name="dietary" class="w-full input-field rounded-lg px-4 py-3 text-white h-20" placeholder="Vegan, Vegetarian, Gluten Free, Allergies, etc..."></textarea>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">T-Shirt Preferences</label>
                            <textarea name="tshirt" class="w-full input-field rounded-lg px-4 py-3 text-white h-20" placeholder="Color, Size (S/M/L/XL/XXL), Style preferences..."></textarea>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Accessibility Needs</label>
                            <textarea name="accessibility" class="w-full input-field rounded-lg px-4 py-3 text-white h-20" placeholder="Any accessibility requirements we should know about..."></textarea>
                        </div>

                        <input type="hidden" name="npub" id="formNpub">

                        <div class="pt-4">
                            <button type="submit" class="w-full btn-primary text-white font-bold py-4 rounded-lg text-lg">Complete Registration</button>
                        </div>

                        <div id="registrationSuccess" class="hidden bg-green-900/50 border border-green-500/50 rounded-lg p-4 text-center">
                            <p class="text-green-200 font-semibold">Registration successful!</p>
                            <p class="text-green-300/70 text-sm mt-1">You now have full access to all content and Signal chat.</p>
                        </div>

                        <div id="alreadyRegistered" class="hidden bg-yellow-900/50 border border-yellow-500/50 rounded-lg p-4 text-center">
                            <p class="text-yellow-200 font-semibold">This npub has already been registered.</p>
                            <p class="text-yellow-300/70 text-sm mt-1">Each approved npub can only register once.</p>
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <!-- Program Section (Protected) -->
        <section id="program" class="hidden-section min-h-screen py-20 px-4 relative">
            <div id="programLock" class="lock-overlay rounded-3xl">
                <div class="text-center">
                    <div class="text-6xl mb-4">üîí</div>
                    <p class="text-xl text-white mb-4">Program details are private</p>
                    <button onclick="toggleAuth()" class="btn-primary text-white font-bold py-3 px-6 rounded-full">Login with Nostr</button>
                </div>
            </div>
            <div class="max-w-6xl mx-auto protected-content" id="programContent">
                <div class="text-center mb-12">
                    <h2 class="text-4xl font-bold mb-4 gradient-text">Program</h2>
                    <p class="text-gray-400 text-lg">Three days of convergence in Oslo</p>
                </div>

                <div class="space-y-8">
                    <!-- Day 1 -->
                    <div class="card rounded-2xl p-8">
                        <div class="flex items-center gap-4 mb-6">
                            <div class="bg-purple-600/20 text-purple-400 px-4 py-2 rounded-full font-bold mono">DAY 1</div>
                            <div>
                                <h3 class="text-2xl font-bold">Friday, May 29th</h3>
                                <p class="text-gray-400">Arrival & Opening</p>
                            </div>
                        </div>
                        <div class="space-y-4">
                            <div class="flex gap-4 items-start">
                                <span class="mono text-purple-400 w-20 flex-shrink-0">14:00</span>
                                <div>
                                    <h4 class="font-semibold">Registration Opens</h4>
                                    <p class="text-gray-400 text-sm">Pick up your badge and welcome package</p>
                                </div>
                            </div>
                            <div class="flex gap-4 items-start">
                                <span class="mono text-purple-400 w-20 flex-shrink-0">16:00</span>
                                <div>
                                    <h4 class="font-semibold">Opening Ceremony</h4>
                                    <p class="text-gray-400 text-sm">Welcome address and event overview</p>
                                </div>
                            </div>
                            <div class="flex gap-4 items-start">
                                <span class="mono text-purple-400 w-20 flex-shrink-0">18:00</span>
                                <div>
                                    <h4 class="font-semibold">Welcome Dinner</h4>
                                    <p class="text-gray-400 text-sm">Networking dinner with fellow attendees</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Day 2 -->
                    <div class="card rounded-2xl p-8">
                        <div class="flex items-center gap-4 mb-6">
                            <div class="bg-purple-600/20 text-purple-400 px-4 py-2 rounded-full font-bold mono">DAY 2</div>
                            <div>
                                <h3 class="text-2xl font-bold">Saturday, May 30th</h3>
                                <p class="text-gray-400">Main Event Day</p>
                            </div>
                        </div>
                        <div class="space-y-4">
                            <div class="flex gap-4 items-start">
                                <span class="mono text-purple-400 w-20 flex-shrink-0">09:00</span>
                                <div>
                                    <h4 class="font-semibold">Breakfast & Networking</h4>
                                    <p class="text-gray-400 text-sm">Morning gathering</p>
                                </div>
                            </div>
                            <div class="flex gap-4 items-start">
                                <span class="mono text-purple-400 w-20 flex-shrink-0">10:00</span>
                                <div>
                                    <h4 class="font-semibold">Keynote Sessions</h4>
                                    <p class="text-gray-400 text-sm">Main presentations and talks</p>
                                </div>
                            </div>
                            <div class="flex gap-4 items-start">
                                <span class="mono text-purple-400 w-20 flex-shrink-0">13:00</span>
                                <div>
                                    <h4 class="font-semibold">Lunch</h4>
                                    <p class="text-gray-400 text-sm">Catered lunch at venue</p>
                                </div>
                            </div>
                            <div class="flex gap-4 items-start">
                                <span class="mono text-purple-400 w-20 flex-shrink-0">14:30</span>
                                <div>
                                    <h4 class="font-semibold">Workshops & Breakouts</h4>
                                    <p class="text-gray-400 text-sm">Interactive sessions</p>
                                </div>
                            </div>
                            <div class="flex gap-4 items-start">
                                <span class="mono text-purple-400 w-20 flex-shrink-0">19:00</span>
                                <div>
                                    <h4 class="font-semibold">Gala Dinner</h4>
                                    <p class="text-gray-400 text-sm">Evening celebration</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Day 3 -->
                    <div class="card rounded-2xl p-8">
                        <div class="flex items-center gap-4 mb-6">
                            <div class="bg-purple-600/20 text-purple-400 px-4 py-2 rounded-full font-bold mono">DAY 3</div>
                            <div>
                                <h3 class="text-2xl font-bold">Sunday, May 31st</h3>
                                <p class="text-gray-400">Closing & Exploration</p>
                            </div>
                        </div>
                        <div class="space-y-4">
                            <div class="flex gap-4 items-start">
                                <span class="mono text-purple-400 w-20 flex-shrink-0">10:00</span>
                                <div>
                                    <h4 class="font-semibold">Brunch</h4>
                                    <p class="text-gray-400 text-sm">Final gathering</p>
                                </div>
                            </div>
                            <div class="flex gap-4 items-start">
                                <span class="mono text-purple-400 w-20 flex-shrink-0">11:30</span>
                                <div>
                                    <h4 class="font-semibold">Closing Circle</h4>
                                    <p class="text-gray-400 text-sm">Reflections and next steps</p>
                                </div>
                            </div>
                            <div class="flex gap-4 items-start">
                                <span class="mono text-purple-400 w-20 flex-shrink-0">13:00</span>
                                <div>
                                    <h4 class="font-semibold">Optional: Oslo Exploration</h4>
                                    <p class="text-gray-400 text-sm">Guided tours and activities</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Location Section (Protected) -->
        <section id="location" class="hidden-section min-h-screen py-20 px-4 relative">
            <div id="locationLock" class="lock-overlay rounded-3xl">
                <div class="text-center">
                    <div class="text-6xl mb-4">üîí</div>
                    <p class="text-xl text-white mb-4">Location details are private</p>
                    <button onclick="toggleAuth()" class="btn-primary text-white font-bold py-3 px-6 rounded-full">Login with Nostr</button>
                </div>
            </div>
            <div class="max-w-4xl mx-auto protected-content" id="locationContent">
                <div class="text-center mb-12">
                    <h2 class="text-4xl font-bold mb-4 gradient-text">Location</h2>
                    <p class="text-gray-400 text-lg">Oslo, Norway</p>
                </div>

                <div class="card rounded-2xl p-8 mb-8">
                    <div class="aspect-video bg-gradient-to-br from-purple-900/50 to-blue-900/50 rounded-xl flex items-center justify-center mb-6">
                        <div class="text-center">
                            <div class="text-6xl mb-4">üèõÔ∏è</div>
                            <p class="text-gray-300">Historic Venue in Oslo</p>
                            <p class="text-gray-500 text-sm mt-2">Exact address revealed after registration</p>
                        </div>
                    </div>
                    <h3 class="text-2xl font-bold mb-4">The Venue</h3>
                    <p class="text-gray-300 leading-relaxed mb-4">
                        We've secured a beautiful historic venue in the heart of Oslo. The space offers the perfect atmosphere for deep conversations, collaborative workshops, and meaningful connections.
                    </p>
                    <p class="text-gray-400 leading-relaxed">
                        Full address and travel instructions will be shared with registered attendees via Signal.
                    </p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="card rounded-2xl p-6">
                        <h4 class="font-bold mb-3 flex items-center gap-2">
                            <span>‚úàÔ∏è</span> Getting to Oslo
                        </h4>
                        <p class="text-gray-400 text-sm">
                            Oslo Airport (OSL) is well-connected with direct flights from major European cities. Airport express train gets you to the city center in 20 minutes.
                        </p>
                    </div>
                    <div class="card rounded-2xl p-6">
                        <h4 class="font-bold mb-3 flex items-center gap-2">
                            <span>üè®</span> Accommodation
                        </h4>
                        <p class="text-gray-400 text-sm">
                            We recommend hotels in the city center. A list of partner hotels with special rates will be shared with registered attendees.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Explore Oslo Section (Protected) -->
        <section id="explore" class="hidden-section min-h-screen py-20 px-4 relative">
            <div id="exploreLock" class="lock-overlay rounded-3xl">
                <div class="text-center">
                    <div class="text-6xl mb-4">üîí</div>
                    <p class="text-xl text-white mb-4">Explore Oslo content is private</p>
                    <button onclick="toggleAuth()" class="btn-primary text-white font-bold py-3 px-6 rounded-full">Login with Nostr</button>
                </div>
            </div>
            <div class="max-w-6xl mx-auto protected-content" id="exploreContent">
                <div class="text-center mb-12">
                    <h2 class="text-4xl font-bold mb-4 gradient-text">Explore Oslo</h2>
                    <p class="text-gray-400 text-lg">Discover the Norwegian capital</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="card rounded-2xl overflow-hidden">
                        <div class="h-48 bg-gradient-to-br from-blue-900/50 to-purple-900/50 flex items-center justify-center">
                            <span class="text-4xl">üèîÔ∏è</span>
                        </div>
                        <div class="p-6">
                            <h3 class="font-bold text-lg mb-2">Holmenkollen</h3>
                            <p class="text-gray-400 text-sm">Iconic ski jump with panoramic views of Oslo and the fjord.</p>
                        </div>
                    </div>
                    <div class="card rounded-2xl overflow-hidden">
                        <div class="h-48 bg-gradient-to-br from-green-900/50 to-blue-900/50 flex items-center justify-center">
                            <span class="text-4xl">‚õµ</span>
                        </div>
                        <div class="p-6">
                            <h3 class="font-bold text-lg mb-2">Oslofjord</h3>
                            <p class="text-gray-400 text-sm">Beautiful waterfront with islands perfect for day trips.</p>
                        </div>
                    </div>
                    <div class="card rounded-2xl overflow-hidden">
                        <div class="h-48 bg-gradient-to-br from-purple-900/50 to-pink-900/50 flex items-center justify-center">
                            <span class="text-4xl">üé®</span>
                        </div>
                        <div class="p-6">
                            <h3 class="font-bold text-lg mb-2">Museums</h3>
                            <p class="text-gray-400 text-sm">Viking Ship Museum, Munch Museum, and Opera House.</p>
                        </div>
                    </div>
                    <div class="card rounded-2xl overflow-hidden">
                        <div class="h-48 bg-gradient-to-br from-yellow-900/50 to-orange-900/50 flex items-center justify-center">
                            <span class="text-4xl">‚òï</span>
                        </div>
                        <div class="p-6">
                            <h3 class="font-bold text-lg mb-2">Coffee Culture</h3>
                            <p class="text-gray-400 text-sm">World-class coffee scene in Gr√ºnerl√∏kka and city center.</p>
                        </div>
                    </div>
                    <div class="card rounded-2xl overflow-hidden">
                        <div class="h-48 bg-gradient-to-br from-red-900/50 to-purple-900/50 flex items-center justify-center">
                            <span class="text-4xl">üå≤</span>
                        </div>
                        <div class="p-6">
                            <h3 class="font-bold text-lg mb-2">Nordmarka Forest</h3>
                            <p class="text-gray-400 text-sm">Accessible wilderness perfect for hiking and nature walks.</p>
                        </div>
                    </div>
                    <div class="card rounded-2xl overflow-hidden">
                        <div class="h-48 bg-gradient-to-br from-indigo-900/50 to-blue-900/50 flex items-center justify-center">
                            <span class="text-4xl">üçΩÔ∏è</span>
                        </div>
                        <div class="p-6">
                            <h3 class="font-bold text-lg mb-2">Food Scene</h3>
                            <p class="text-gray-400 text-sm">From Michelin stars to street food markets.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Signal Group Chat Widget -->
    <div id="signal-chat-widget" style="position: fixed; bottom: 20px; right: 20px; z-index: 9999;">
        <button onclick="toggleSignalChat()" style="width: 60px; height: 60px; border-radius: 50%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; cursor: pointer; box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4); display: flex; align-items: center; justify-content: center; transition: transform 0.3s;" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="white">
                <path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20ZM13 11V7H11V11H7V13H11V17H13V13H17V11H13Z"/>
            </svg>
        </button>
        <div id="signalChatWindow" style="position: fixed; bottom: 90px; right: 20px; width: 350px; height: 400px; background: #1a1a1a; border-radius: 12px; box-shadow: 0 10px 40px rgba(0,0,0,0.5); display: none; flex-direction: column; overflow: hidden; border: 1px solid rgba(255,255,255,0.1);">
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 16px; color: white;">
                <h3 style="font-weight: bold; margin: 0;">Signal Group Chat</h3>
                <p style="font-size: 12px; margin: 4px 0 0 0; opacity: 0.9;">Join the conversation</p>
            </div>
            <div style="flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center;">
                <div style="font-size: 48px; margin-bottom: 16px;">üí¨</div>
                <p style="color: #9ca3af; margin-bottom: 20px;">Connect with other attendees on Signal</p>
                <a href="https://signal.group/#CjQKIPNfnDwCkcYdM_SyZ5hPgRBwQpSE8-KM12y1WkKUcr6OEhBxoivrUKuX3_TqrKzps1AD" target="_blank" style="display: inline-block; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 12px 24px; border-radius: 8px; text-decoration: none; font-weight: 600; transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">Join Signal Group</a>
            </div>
        </div>
    </div>

    <script>
        // Approved npubs list - including the new one
        const approvedNpubs = [
            'npub1wmr34t36fy03m8hvgl96zl3znndyzyaqhwmwdtshwmtkg03fetaqhjg240',
            // Add other approved npubs here
        ];

        // Track registered npubs to prevent duplicate registration
        const registeredNpubs = new Set();

        // Check if npub is approved
        function isApprovedNpub(npub) {
            return approvedNpubs.includes(npub);
        }

        // Check if npub is already registered
        function isAlreadyRegistered(npub) {
            return registeredNpubs.has(npub);
        }

        // Current user state
        let currentUser = null;

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Check URL hash and show appropriate section
            const hash = window.location.hash.slice(1);
            if (hash && hash !== 'home') {
                showSection(hash);
            }

            // Listen for hash changes
            window.addEventListener('hashchange', function() {
                const hash = window.location.hash.slice(1);
                if (hash) {
                    showSection(hash);
                }
            });

            // Setup registration form
            setupRegistrationForm();
        });

        // Show section
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('section').forEach(section => {
                section.classList.remove('active-section');
                section.classList.add('hidden-section');
            });

            // Show target section
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.classList.remove('hidden-section');
                targetSection.classList.add('active-section');
                window.location.hash = sectionId;
            }

            // Close mobile menu if open
            document.getElementById('mobileMenu').classList.add('hidden');

            // Scroll to top
            window.scrollTo(0, 0);
        }

        // Check auth before showing protected section
        function checkAuthAndShow(sectionId) {
            if (!currentUser) {
                toggleAuth();
                return;
            }
            showSection(sectionId);
        }

        // Go to registration
        function goToRegistration() {
            if (!currentUser) {
                toggleAuth();
                return;
            }
            showSection('registration');
        }

        // Toggle auth modal
        function toggleAuth() {
            const modal = document.getElementById('authModal');
            modal.classList.toggle('hidden');
            document.getElementById('authError').classList.add('hidden');
            document.getElementById('manualNpub').value = '';
        }

        // Toggle mobile menu
        function toggleMobileMenu() {
            document.getElementById('mobileMenu').classList.toggle('hidden');
        }

        // Auth with Nostr extension
        async function authWithExtension() {
            document.getElementById('authOptions').classList.add('hidden');
            document.getElementById('authLoading').classList.remove('hidden');

            try {
                if (!window.nostr) {
                    throw new Error('Nostr extension not found. Please install a NIP-07 compatible extension.');
                }

                const pubkey = await window.nostr.getPublicKey();
                const npub = window.NostrTools.nip19.npubEncode(pubkey);

                await verifyAndLogin(npub);
            } catch (error) {
                showAuthError(error.message);
            }
        }

        // Auth manually with npub
        async function authManual() {
            const npub = document.getElementById('manualNpub').value.trim();

            if (!npub) {
                showAuthError('Please enter an npub');
                return;
            }

            if (!npub.startsWith('npub1')) {
                showAuthError('Invalid npub format');
                return;
            }

            document.getElementById('authOptions').classList.add('hidden');
            document.getElementById('authLoading').classList.remove('hidden');

            try {
                await verifyAndLogin(npub);
            } catch (error) {
                showAuthError(error.message);
            }
        }

        // Verify and login
        async function verifyAndLogin(npub) {
            // Simulate verification delay
            await new Promise(resolve => setTimeout(resolve, 1000));

            if (!isApprovedNpub(npub)) {
                throw new Error('This npub is not on the approved list. If you believe this is an error, please contact the organizers.');
            }

            // Success
            currentUser = { npub };

            // Update UI
            document.getElementById('authBtn').textContent = '[ LOGOUT ]';
            document.getElementById('authBtn').onclick = logout;

            // Show protected nav items
            document.getElementById('exploreNavBtn').classList.remove('nav-hidden');
            document.getElementById('exploreNavBtn').classList.add('nav-visible');
            document.getElementById('exploreNavBtnMobile').classList.remove('nav-hidden');
            document.getElementById('exploreNavBtnMobile').classList.add('nav-visible');

            // Unlock protected sections
            unlockProtectedSections();

            // Close modal
            toggleAuth();

            // Show success notification
            showNotification('Successfully authenticated!', 'success');
        }

        // Show auth error
        function showAuthError(message) {
            document.getElementById('authLoading').classList.add('hidden');
            document.getElementById('authOptions').classList.remove('hidden');
            const errorDiv = document.getElementById('authError');
            errorDiv.textContent = message;
            errorDiv.classList.remove('hidden');
        }

        // Logout
        function logout() {
            currentUser = null;
            document.getElementById('authBtn').textContent = '[ LOGIN ]';
            document.getElementById('authBtn').onclick = toggleAuth;

            // Hide protected nav items
            document.getElementById('exploreNavBtn').classList.add('nav-hidden');
            document.getElementById('exploreNavBtn').classList.remove('nav-visible');
            document.getElementById('exploreNavBtnMobile').classList.add('nav-hidden');
            document.getElementById('exploreNavBtnMobile').classList.remove('nav-visible');

            // Lock protected sections
            lockProtectedSections();

            showNotification('Logged out', 'info');
        }

        // Unlock protected sections
        function unlockProtectedSections() {
            document.querySelectorAll('.protected-content').forEach(el => {
                el.classList.add('unlocked');
            });
            document.querySelectorAll('.lock-overlay').forEach(el => {
                el.style.display = 'none';
            });

            // Update registration form with user npub
            if (currentUser) {
                document.getElementById('formNpub').value = currentUser.npub;
                document.getElementById('userNpubDisplay').textContent = currentUser.npub;
            }
        }

        // Lock protected sections
        function lockProtectedSections() {
            document.querySelectorAll('.protected-content').forEach(el => {
                el.classList.remove('unlocked');
            });
            document.querySelectorAll('.lock-overlay').forEach(el => {
                el.style.display = 'flex';
            });
        }

        // Setup registration form
        function setupRegistrationForm() {
            const form = document.getElementById('registrationForm');
            form.addEventListener('submit', function(e) {
                e.preventDefault();

                const npub = document.getElementById('formNpub').value;

                // Check if already registered
                if (isAlreadyRegistered(npub)) {
                    document.getElementById('alreadyRegistered').classList.remove('hidden');
                    document.getElementById('registrationSuccess').classList.add('hidden');
                    return;
                }

                // Mark as registered
                registeredNpubs.add(npub);

                // Show success
                document.getElementById('registrationSuccess').classList.remove('hidden');
                document.getElementById('alreadyRegistered').classList.add('hidden');

                // Disable form
                form.querySelectorAll('input, textarea, button[type="submit"]').forEach(el => {
                    el.disabled = true;
                });

                showNotification('Registration completed successfully!', 'success');
            });
        }

        // Toggle Signal chat widget
        function toggleSignalChat() {
            const chatWindow = document.getElementById('signalChatWindow');
            if (chatWindow.style.display === 'none' || !chatWindow.style.display) {
                chatWindow.style.display = 'flex';
            } else {
                chatWindow.style.display = 'none';
            }
        }

        // Show notification
        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 80px;
                right: 20px;
                padding: 16px 24px;
                border-radius: 8px;
                color: white;
                font-weight: 600;
                z-index: 9999;
                animation: slideIn 0.3s ease;
                background: ${type === 'success' ? 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' : '#374151'};
            `;
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }
    </script>

    <style>
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }
    </style>
</body>
</html>
